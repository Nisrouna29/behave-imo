<!-- Mobile Menu Overlay -->
@if (isMobileMenuOpen) {
    <div class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden" (click)="closeMobileMenu.emit()"></div>
}

<!-- Sidebar -->
<aside id="left-sidebar"
       class="bg-white border-r border-gray-200 h-screen sticky top-0 shadow-lg transition-all duration-300 z-50"
       [class]="isSidebarCollapsed ? 'w-16' : 'w-64'">

    <!-- Sidebar Header -->
    <div class="p-4 border-b border-gray-200">
        <div class="flex items-center justify-between">
            @if (!isSidebarCollapsed) {
                <span class="text-lg font-bold text-gray-800">Menu</span>
            }
            <button (click)="toggleSidebar.emit()"
                    class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                <i class="fa-solid fa-bars text-gray-600"></i>
            </button>
        </div>
    </div>

    <!-- Sidebar Content -->
    <div class="p-4">
        <nav class="space-y-2">
            <!-- Navigation Section -->
            <div class="mb-6">
                @if (!isSidebarCollapsed) {
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Navigation</h3>
                }
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'accueil'"
                          [class.hover:bg-orange-50]="currentView !== 'accueil'"
                          [class.hover:text-orange-600]="currentView !== 'accueil'"
                          [class.text-orange-600]="currentView === 'accueil'"
                          [class.bg-orange-50]="currentView === 'accueil'"
                          (click)="onMenuItemClick('accueil')">
                        <i class="fa-solid fa-home w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Accueil</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'proprietes'"
                          [class.hover:bg-orange-50]="currentView !== 'proprietes'"
                          [class.hover:text-orange-600]="currentView !== 'proprietes'"
                          [class.text-orange-600]="currentView === 'proprietes'"
                          [class.bg-orange-50]="currentView === 'proprietes'"
                          (click)="onMenuItemClick('proprietes')">
                        <i class="fa-solid fa-building w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Propriétés</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'etat-lieux'"
                          [class.hover:bg-orange-50]="currentView !== 'etat-lieux'"
                          [class.hover:text-orange-600]="currentView !== 'etat-lieux'"
                          [class.text-orange-600]="currentView === 'etat-lieux'"
                          [class.bg-orange-50]="currentView === 'etat-lieux'"
                          (click)="onMenuItemClick('etat-lieux')">
                        <i class="fa-solid fa-clipboard-check w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>États des lieux</span>
                        }
                    </span>
                </div>
            </div>

            <!-- Gestion Section -->
            <div class="mb-6">
                @if (!isSidebarCollapsed) {
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Gestion</h3>
                }
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'dossiers-locataires'"
                          [class.hover:bg-orange-50]="currentView !== 'dossiers-locataires'"
                          [class.hover:text-orange-600]="currentView !== 'dossiers-locataires'"
                          [class.text-orange-600]="currentView === 'dossiers-locataires'"
                          [class.bg-orange-50]="currentView === 'dossiers-locataires'"
                          (click)="onMenuItemClick('dossiers-locataires')">
                        <i class="fa-solid fa-folder w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Dossiers</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'candidatures'"
                          [class.hover:bg-orange-50]="currentView !== 'candidatures'"
                          [class.hover:text-orange-600]="currentView !== 'candidatures'"
                          [class.text-orange-600]="currentView === 'candidatures'"
                          [class.bg-orange-50]="currentView === 'candidatures'"
                          (click)="onMenuItemClick('candidatures')">
                        <i class="fa-solid fa-file-text w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Candidatures</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'gestion-paye'"
                          [class.hover:bg-orange-50]="currentView !== 'gestion-paye'"
                          [class.hover:text-orange-600]="currentView !== 'gestion-paye'"
                          [class.text-orange-600]="currentView === 'gestion-paye'"
                          [class.bg-orange-50]="currentView === 'gestion-paye'"
                          (click)="onMenuItemClick('gestion-paye')">
                        <i class="fa-solid fa-credit-card w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Gestion de Paye</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'mes-contrats'"
                          [class.hover:bg-orange-50]="currentView !== 'mes-contrats'"
                          [class.hover:text-orange-600]="currentView !== 'mes-contrats'"
                          [class.text-orange-600]="currentView === 'mes-contrats'"
                          [class.bg-orange-50]="currentView === 'mes-contrats'"
                          (click)="onMenuItemClick('mes-contrats')">
                        <i class="fa-solid fa-file-contract w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Mes Contrats</span>
                        }
                    </span>
                </div>
            </div>

            <!-- Communication Section -->
            <div class="mb-6">
                @if (!isSidebarCollapsed) {
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Communication</h3>
                }
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'chat'"
                          [class.hover:bg-orange-50]="currentView !== 'chat'"
                          [class.hover:text-orange-600]="currentView !== 'chat'"
                          [class.text-orange-600]="currentView === 'chat'"
                          [class.bg-orange-50]="currentView === 'chat'"
                          (click)="onMenuItemClick('chat')">
                        <i class="fa-solid fa-comment w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Chat</span>
                        }
                    </span>
                </div>
            </div>

            <!-- Outils Section -->
            <div class="mb-6">
                @if (!isSidebarCollapsed) {
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Outils</h3>
                }
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'statistiques'"
                          [class.hover:bg-orange-50]="currentView !== 'statistiques'"
                          [class.hover:text-orange-600]="currentView !== 'statistiques'"
                          [class.text-orange-600]="currentView === 'statistiques'"
                          [class.bg-orange-50]="currentView === 'statistiques'"
                          (click)="onMenuItemClick('statistiques')">
                        <i class="fa-solid fa-chart-bar w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Statistiques</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'planning'"
                          [class.hover:bg-orange-50]="currentView !== 'planning'"
                          [class.hover:text-orange-600]="currentView !== 'planning'"
                          [class.text-orange-600]="currentView === 'planning'"
                          [class.bg-orange-50]="currentView === 'planning'"
                          (click)="onMenuItemClick('planning')">
                        <i class="fa-solid fa-calendar w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Planning</span>
                        }
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class]="isSidebarCollapsed ? 'justify-center' : ''"
                          [class.text-gray-700]="currentView !== 'parametres'"
                          [class.hover:bg-orange-50]="currentView !== 'parametres'"
                          [class.hover:text-orange-600]="currentView !== 'parametres'"
                          [class.text-orange-600]="currentView === 'parametres'"
                          [class.bg-orange-50]="currentView === 'parametres'"
                          (click)="onMenuItemClick('parametres')">
                        <i class="fa-solid fa-cog w-5 h-5" [class]="isSidebarCollapsed ? '' : 'mr-3'"></i>
                        @if (!isSidebarCollapsed) {
                            <span>Paramètres</span>
                        }
                    </span>
                </div>
            </div>
        </nav>
    </div>
</aside>

<!-- Mobile Sidebar -->
<aside class="fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-300 lg:hidden"
       [class]="isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full'">
    <div class="p-4 border-b border-gray-200">
        <div class="flex items-center justify-between">
            <span class="text-lg font-bold text-gray-800">Menu</span>
            <button (click)="closeMobileMenu.emit()"
                    class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                <i class="fa-solid fa-times text-gray-600"></i>
            </button>
        </div>
    </div>
    <div class="p-4">
        <nav class="space-y-2">
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Navigation</h3>
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'accueil'"
                          [class.hover:bg-orange-50]="currentView !== 'accueil'"
                          [class.hover:text-orange-600]="currentView !== 'accueil'"
                          [class.text-orange-600]="currentView === 'accueil'"
                          [class.bg-orange-50]="currentView === 'accueil'"
                          (click)="onMenuItemClick('accueil')">
                        <i class="fa-solid fa-home w-5 h-5 mr-3"></i>
                        <span>Accueil</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'proprietes'"
                          [class.hover:bg-orange-50]="currentView !== 'proprietes'"
                          [class.hover:text-orange-600]="currentView !== 'proprietes'"
                          [class.text-orange-600]="currentView === 'proprietes'"
                          [class.bg-orange-50]="currentView === 'proprietes'"
                          (click)="onMenuItemClick('proprietes')">
                        <i class="fa-solid fa-building w-5 h-5 mr-3"></i>
                        <span>Propriétés</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'etat-lieux'"
                          [class.hover:bg-orange-50]="currentView !== 'etat-lieux'"
                          [class.hover:text-orange-600]="currentView !== 'etat-lieux'"
                          [class.text-orange-600]="currentView === 'etat-lieux'"
                          [class.bg-orange-50]="currentView === 'etat-lieux'"
                          (click)="onMenuItemClick('etat-lieux')">
                        <i class="fa-solid fa-clipboard-check w-5 h-5 mr-3"></i>
                        <span>États des lieux</span>
                    </span>
                </div>
            </div>
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Gestion</h3>
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'dossiers-locataires'"
                          [class.hover:bg-orange-50]="currentView !== 'dossiers-locataires'"
                          [class.hover:text-orange-600]="currentView !== 'dossiers-locataires'"
                          [class.text-orange-600]="currentView === 'dossiers-locataires'"
                          [class.bg-orange-50]="currentView === 'dossiers-locataires'"
                          (click)="onMenuItemClick('dossiers-locataires')">
                        <i class="fa-solid fa-folder w-5 h-5 mr-3"></i>
                        <span>Dossiers Locataires</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'acheteurs'"
                          [class.hover:bg-orange-50]="currentView !== 'acheteurs'"
                          [class.hover:text-orange-600]="currentView !== 'acheteurs'"
                          [class.text-orange-600]="currentView === 'acheteurs'"
                          [class.bg-orange-50]="currentView === 'acheteurs'"
                          (click)="onMenuItemClick('acheteurs')">
                        <i class="fa-solid fa-users w-5 h-5 mr-3"></i>
                        <span>Acheteurs</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'candidatures'"
                          [class.hover:bg-orange-50]="currentView !== 'candidatures'"
                          [class.hover:text-orange-600]="currentView !== 'candidatures'"
                          [class.text-orange-600]="currentView === 'candidatures'"
                          [class.bg-orange-50]="currentView === 'candidatures'"
                          (click)="onMenuItemClick('candidatures')">
                        <i class="fa-solid fa-file-text w-5 h-5 mr-3"></i>
                        <span>Candidatures</span>
                    </span>
                </div>
            </div>
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Communication</h3>
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'chat'"
                          [class.hover:bg-orange-50]="currentView !== 'chat'"
                          [class.hover:text-orange-600]="currentView !== 'chat'"
                          [class.text-orange-600]="currentView === 'chat'"
                          [class.bg-orange-50]="currentView === 'chat'"
                          (click)="onMenuItemClick('chat')">
                        <i class="fa-solid fa-comment w-5 h-5 mr-3"></i>
                        <span>Chat</span>
                    </span>
                </div>
            </div>
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Outils</h3>
                <div class="space-y-1">
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'statistiques'"
                          [class.hover:bg-orange-50]="currentView !== 'statistiques'"
                          [class.hover:text-orange-600]="currentView !== 'statistiques'"
                          [class.text-orange-600]="currentView === 'statistiques'"
                          [class.bg-orange-50]="currentView === 'statistiques'"
                          (click)="onMenuItemClick('statistiques')">
                        <i class="fa-solid fa-chart-bar w-5 h-5 mr-3"></i>
                        <span>Statistiques</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'planning'"
                          [class.hover:bg-orange-50]="currentView !== 'planning'"
                          [class.hover:text-orange-600]="currentView !== 'planning'"
                          [class.text-orange-600]="currentView === 'planning'"
                          [class.bg-orange-50]="currentView === 'planning'"
                          (click)="onMenuItemClick('planning')">
                        <i class="fa-solid fa-calendar w-5 h-5 mr-3"></i>
                        <span>Planning</span>
                    </span>
                    <span class="flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer"
                          [class.text-gray-700]="currentView !== 'parametres'"
                          [class.hover:bg-orange-50]="currentView !== 'parametres'"
                          [class.hover:text-orange-600]="currentView !== 'parametres'"
                          [class.text-orange-600]="currentView === 'parametres'"
                          [class.bg-orange-50]="currentView === 'parametres'"
                          (click)="onMenuItemClick('parametres')">
                        <i class="fa-solid fa-cog w-5 h-5 mr-3"></i>
                        <span>Paramètres</span>
                    </span>
                </div>
            </div>
        </nav>
    </div>
</aside>
