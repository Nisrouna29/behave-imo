import{a as vt,b as mt,c as me}from"./chunk-AIZVJUQQ.js";var be=me((F,tt)=>{(function(b,R){typeof F=="object"&&typeof tt=="object"?tt.exports=R(b._Highcharts,b._Highcharts.Templating,b._Highcharts.Color,b._Highcharts.SeriesRegistry,b._Highcharts.SVGElement,b._Highcharts.Series):typeof define=="function"&&define.amd?define("highcharts/modules/treemap",["highcharts/highcharts"],function(P){return R(P,P.Templating,P.Color,P.SeriesRegistry,P.SVGElement,P.Series)}):typeof F=="object"?F["highcharts/modules/treemap"]=R(b._Highcharts,b._Highcharts.Templating,b._Highcharts.Color,b._Highcharts.SeriesRegistry,b._Highcharts.SVGElement,b._Highcharts.Series):b.Highcharts=R(b.Highcharts,b.Highcharts.Templating,b.Highcharts.Color,b.Highcharts.SeriesRegistry,b.Highcharts.SVGElement,b.Highcharts.Series)})(typeof window>"u"?F:window,(b,R,P,bt,ft,yt)=>(()=>{"use strict";var $,K,xt={28:n=>{n.exports=ft},512:n=>{n.exports=bt},620:n=>{n.exports=P},820:n=>{n.exports=yt},944:n=>{n.exports=b},984:n=>{n.exports=R}},et={};function y(n){var t=et[n];if(t!==void 0)return t.exports;var e=et[n]={exports:{}};return xt[n](e,e.exports,y),e.exports}y.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return y.d(t,{a:t}),t},y.d=(n,t)=>{for(var e in t)y.o(t,e)&&!y.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},y.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var it={};y.d(it,{default:()=>ve});var wt=y(944),B=y.n(wt);let st={lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}};var Tt=y(984);let{format:Lt}=y.n(Tt)(),{composed:At}=B(),{addEvent:E,defined:Bt,extend:Pt,fireEvent:St,isString:Ct,merge:z,objectEach:ot,pick:Y,pushUnique:Ot}=B();function Nt(){if(this.breadcrumbs){let n=this.resetZoomButton&&this.resetZoomButton.getBBox(),t=this.breadcrumbs.options;n&&t.position.align==="right"&&t.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-n.width-t.buttonSpacing)}}function Mt(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function Dt(){let n=this.breadcrumbs;if(n&&!n.options.floating&&n.level){let t=n.options,e=t.buttonTheme,i=(e.height||0)+2*(e.padding||0)+t.buttonSpacing,r=t.position.verticalAlign;r==="bottom"?(this.marginBottom=(this.marginBottom||0)+i,n.yOffset=i):r!=="middle"?(this.plotTop+=i,n.yOffset=-i):n.yOffset=void 0}}function Rt(){this.breadcrumbs&&this.breadcrumbs.redraw()}function It(n){n.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class V{static compose(t,e){Ot(At,"Breadcrumbs")&&(E(t,"destroy",Mt),E(t,"afterShowResetZoom",Nt),E(t,"getMargins",Dt),E(t,"redraw",Rt),E(t,"selection",It),Pt(e.lang,st.lang))}constructor(t,e){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];let i=z(t.options.drilldown&&t.options.drilldown.drillUpButton,V.defaultOptions,t.options.navigation&&t.options.navigation.breadcrumbs,e);this.chart=t,this.options=i||{}}updateProperties(t){this.setList(t),this.setLevel(),this.isDirty=!0}setList(t){this.list=t}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(t){let e=this.chart,i=this.options,r=e.options.lang,s=Y(i.format,i.showFullPath?"{level.name}":"\u2190 {level.name}"),a=r&&Y(r.drillUpText,r.mainBreadcrumb),o=i.formatter&&i.formatter(t)||Lt(s,{level:t.levelOptions},e)||"";return(Ct(o)&&!o.length||o==="\u2190 ")&&Bt(a)&&(o=i.showFullPath?a:"\u2190 "+a),o}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){let t=this.chart,e=this.options;!this.group&&e&&(this.group=t.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:e.zIndex}).add()),e.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){let t=this.chart,e=this.list,i=this.options.buttonSpacing;this.destroyListElements();let r=this.group?this.group.getBBox().width:i,s=e[e.length-2];!t.drillUpButton&&this.level>0?t.drillUpButton=this.renderButton(s,r,i):t.drillUpButton&&(this.level>0?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(t){if(this.group){let e=this.options,i=e.buttonTheme,r=e.position,s=e.relativeTo==="chart"||e.relativeTo==="spacingBox"?void 0:"plotBox",a=this.group.getBBox(),o=2*(i.padding||0)+e.buttonSpacing;r.width=a.width+o,r.height=a.height+o;let l=z(r);t&&(l.x+=t),this.options.rtl&&(l.x+=r.width),l.y=Y(l.y,this.yOffset,0),this.group.align(l,!0,s)}}renderButton(t,e,i){let r=this,s=this.chart,a=r.options,o=z(a.buttonTheme),l=s.renderer.button(r.getButtonText(t),e,i,function(d){let h,p=a.events&&a.events.click;p&&(h=p.call(r,d,t)),h!==!1&&(a.showFullPath?d.newLevel=t.level:d.newLevel=r.level-1,St(r,"up",d))},o).addClass("highcharts-breadcrumbs-button").add(r.group);return s.styledMode||l.attr(a.style),l}renderSeparator(t,e){let i=this.chart,r=this.options.separator,s=i.renderer.label(r.text,t,e,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return i.styledMode||s.css(r.style),s}update(t){z(!0,this.options,t),this.destroy(),this.isDirty=!0}updateSingleButton(){let t=this.chart,e=this.list[this.level-1];t.drillUpButton&&t.drillUpButton.attr({text:this.getButtonText(e)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(t){let e=this.elementList;ot(e,(i,r)=>{(t||!e[r].updated)&&((i=e[r]).button&&i.button.destroy(),i.separator&&i.separator.destroy(),delete i.button,delete i.separator,delete e[r])}),t&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){ot(this.elementList,t=>{t.updated=!1})}updateListElements(){let t=this.elementList,e=this.options.buttonSpacing,i=this.list,r=this.options.rtl,s=r?-1:1,a=function(p,u){return s*p.getBBox().width+s*u},o=function(p,u,v){p.translate(u-p.getBBox().width,v)},l=this.group?a(this.group,e):e,d,h;for(let p=0,u=i.length;p<u;++p){let v,g,c=p===u-1;t[(h=i[p]).level]?(v=(d=t[h.level]).button,d.separator||c?d.separator&&c&&(d.separator.destroy(),delete d.separator):(l+=s*e,d.separator=this.renderSeparator(l,e),r&&o(d.separator,l,e),l+=a(d.separator,e)),t[h.level].updated=!0):(v=this.renderButton(h,l,e),r&&o(v,l,e),l+=a(v,e),c||(g=this.renderSeparator(l,e),r&&o(g,l,e),l+=a(g,e)),t[h.level]={button:v,separator:g,updated:!0}),v&&v.setState(2*!!c)}}}V.defaultOptions=st.options;var Ht=y(620),rt=y.n(Ht),Gt=y(512),k=y.n(Gt),Et=y(28),Vt=y.n(Et);let{column:{prototype:kt}}=k().seriesTypes,{addEvent:Ut,defined:Wt}=B();(function(n){function t(e){let i=this.series,r=i.chart.renderer;this.moveToTopOnHover&&this.graphic&&(i.stateMarkerGraphic||(i.stateMarkerGraphic=new(Vt())(r,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),e?.state==="hover"?(this.graphic.attr({id:this.id}),i.stateMarkerGraphic.attr({href:`${r.url}#${this.id}`,visibility:"visible"})):i.stateMarkerGraphic.attr({href:""}))}n.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},n.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(e){let i={};return Wt(e.color)&&(!e.state||e.state==="normal")&&(i[this.colorProp||"fill"]=e.color),i},pointAttribs:kt.pointAttribs},n.compose=function(e){return Ut(e.prototype.pointClass,"afterSetState",t),e}})($||($={}));let lt=$;var Ft=y(820),zt=y.n(Ft);let _t=class{constructor(n,t,e,i){this.height=n,this.width=t,this.plot=i,this.direction=e,this.startDirection=e,this.total=0,this.nW=0,this.lW=0,this.nH=0,this.lH=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(r,s){return Math.max(r/s,s/r)}}}addElement(n){this.lP.total=this.elArr[this.elArr.length-1],this.total=this.total+n,this.direction===0?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(n)}reset(){this.nW=0,this.lW=0,this.elArr=[],this.total=0}},jt={draw:function(n,t){let{animatableAttribs:e,onComplete:i,css:r,renderer:s}=t,a=n.series&&n.series.chart.hasRendered?void 0:n.series&&n.series.options.animation,o=n.graphic;if(t.attribs=mt(vt({},t.attribs),{class:n.getClassName()}),n.shouldDraw())o||(n.graphic=o=t.shapeType==="text"?s.text():t.shapeType==="image"?s.image(t.imageUrl||"").attr(t.shapeArgs||{}):s[t.shapeType](t.shapeArgs||{}),o.add(t.group)),r&&o.css(r),o.attr(t.attribs).animate(e,!t.isNew&&a,i);else if(o){let l=()=>{n.graphic=o=o&&o.destroy(),typeof i=="function"&&i()};Object.keys(e).length?o.animate(e,void 0,()=>l()):l()}}},{pie:{prototype:{pointClass:$t}},scatter:{prototype:{pointClass:Kt}}}=k().seriesTypes,{extend:Yt,isNumber:at,pick:qt}=B();class nt extends Kt{constructor(){super(...arguments),this.groupedPointsAmount=0,this.shapeType="rect"}draw(t){jt.draw(this,t)}getClassName(){let t=this.series,e=t.options,i=super.getClassName();return this.node.level<=t.nodeMap[t.rootNode].level&&this.node.children.length?i+=" highcharts-above-level":this.node.isGroup||this.node.isLeaf||t.nodeMap[t.rootNode].isGroup||qt(e.interactByLeaf,!e.allowTraversingTree)?this.node.isGroup||this.node.isLeaf||t.nodeMap[t.rootNode].isGroup||(i+=" highcharts-internal-node"):i+=" highcharts-internal-node-interactive",i}isValid(){return!!(this.id||at(this.value))}setState(t){super.setState.apply(this,arguments),this.graphic&&this.graphic.attr({zIndex:+(t==="hover")})}shouldDraw(){return at(this.plotY)&&this.y!==null}}Yt(nt.prototype,{setVisible:$t.prototype.setVisible});let{isString:Xt}=B(),Zt={allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{enabled:!0,formatter:function(){let n=this&&this.point?this.point:{};return Xt(n.name)?n.name:""},headers:!1,inside:!0,padding:2,verticalAlign:"middle",style:{textOverflow:"ellipsis"}},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>",clusterFormat:"+ {point.groupedPointsAmount} more...<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:.1*!k().seriesTypes.heatmap,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle",traverseToLeaf:!1,cluster:{className:void 0,color:void 0,enabled:!1,pixelWidth:void 0,pixelHeight:void 0,name:void 0,reductionFactor:void 0,minimumClusterSize:5,layoutAlgorithm:{distance:0,gridSize:0,kmeansThreshold:0},marker:{lineWidth:0,radius:0}}};(K||(K={})).recursive=function n(t,e,i){let r=e.call(i||this,t);r!==!1&&n(r,e,i)};let q=K,{extend:ht,isArray:Jt,isNumber:X,isObject:S,merge:Z,pick:I,relativeLength:Qt}=B(),{parse:te}=rt(),{composed:ee,noop:dt}=B(),{column:ie,scatter:pt}=k().seriesTypes,{getColor:se,getLevelOptions:oe,updateRootId:re}={getColor:function(n,t){let e,i,r,s,a,o,l=t.index,d=t.mapOptionsToLevel,h=t.parentColor,p=t.parentColorIndex,u=t.series,v=t.colors,g=t.siblings,c=u.points,m=u.chart.options.chart;return n&&(e=c[n.i],i=d[n.level]||{},e&&i.colorByPoint&&(s=e.index%(v?v.length:m.colorCount),r=v&&v[s]),u.chart.styledMode||(a=I(e&&e.options.color,i&&i.color,r,h&&(f=>{let w=i&&i.colorVariation;return w&&w.key==="brightness"&&l&&g?rt().parse(f).brighten(w.to*(l/g)).get():f})(h),u.color)),o=I(e&&e.options.colorIndex,i&&i.colorIndex,s,p,t.colorIndex)),{color:a,colorIndex:o}},getLevelOptions:function(n){let t,e,i,r,s,a,o={};if(S(n))for(r=X(n.from)?n.from:1,a=n.levels,e={},t=S(n.defaults)?n.defaults:{},Jt(a)&&(e=a.reduce((l,d)=>{let h,p,u;return S(d)&&X(d.level)&&(p=I((u=Z({},d)).levelIsConstant,t.levelIsConstant),delete u.levelIsConstant,delete u.level,S(l[h=d.level+(p?0:r-1)])?Z(!0,l[h],u):l[h]=u),l},{})),s=X(n.to)?n.to:1,i=0;i<=s;i++)o[i]=Z({},t,S(e[i])?e[i]:{});return o},getNodeWidth:function(n,t){let{chart:e,options:i}=n,{nodeDistance:r=0,nodeWidth:s=0}=i,{plotSizeX:a=1}=e;if(s==="auto"){if(typeof r=="string"&&/%$/.test(r))return a/(t+parseFloat(r)/100*(t-1));let o=Number(r);return(a+o)/(t||1)-o}return Qt(s,a)},setTreeValues:function n(t,e){let i=e.before,r=e.idRoot,s=e.mapIdToNode[r],a=e.levelIsConstant!==!1,o=e.points[t.i],l=o&&o.options||{},d=[],h=0;t.levelDynamic=t.level-(a?0:s.level),t.name=I(o&&o.name,""),t.visible=r===t.id||e.visible===!0,typeof i=="function"&&(t=i(t,e)),t.children.forEach((u,v)=>{let g=ht({},e);ht(g,{index:v,siblings:t.children.length,visible:t.visible}),u=n(u,g),d.push(u),u.visible&&(h+=u.val)});let p=I(l.value,h);return t.visible=p>=0&&(h>0||t.visible),t.children=d,t.childrenTotal=h,t.isLeaf=t.visible&&!h,t.val=p,t},updateRootId:function(n){let t,e;return S(n)&&(e=S(n.options)?n.options:{},t=I(n.rootNode,e.rootId,""),S(n.userOptions)&&(n.userOptions.rootId=t),n.rootNode=t),t}},{addEvent:N,arrayMax:le,clamp:ae,correctFloat:ne,crisp:_,defined:M,error:he,extend:D,fireEvent:de,isArray:ut,isNumber:J,isObject:pe,isString:ct,merge:C,pick:O,pushUnique:ue,splat:j,stableSort:ce}=B();zt().keepProps.push("simulation","hadOutsideDataLabels");let Q=!1;function ge(){let n,t=this.xAxis,e=this.yAxis;t&&e&&(this.is("treemap")?(n={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:100,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]},D(e.options,n),D(t.options,n),Q=!0):Q&&(e.setOptions(e.userOptions),t.setOptions(t.userOptions),Q=!1))}class U extends pt{constructor(){super(...arguments),this.simulation=0}static compose(t){ue(ee,"TreemapSeries")&&N(t,"afterBindAxes",ge)}algorithmCalcPoints(t,e,i,r){let s=i.plot,a=i.elArr.length-1,o,l,d,h,p=i.lW,u=i.lH,v,g=0;for(let c of(e?(p=i.nW,u=i.nH):v=i.elArr[a],i.elArr))(e||g<a)&&(i.direction===0?(o=s.x,l=s.y,h=c/(d=p)):(o=s.x,l=s.y,d=c/(h=u)),r.push({x:o,y:l,width:d,height:ne(h)}),i.direction===0?s.y=s.y+h:s.x=s.x+d),g+=1;i.reset(),i.direction===0?i.width=i.width-p:i.height=i.height-u,s.y=s.parent.y+(s.parent.height-i.height),s.x=s.parent.x+(s.parent.width-i.width),t&&(i.direction=1-i.direction),e||i.addElement(v)}algorithmFill(t,e,i){let r=[],s,a=e.direction,o=e.x,l=e.y,d=e.width,h=e.height,p,u,v,g;for(let c of i)s=e.width*e.height*(c.val/e.val),p=o,u=l,a===0?(d-=v=s/(g=h),o+=v):(h-=g=s/(v=d),l+=g),r.push({x:p,y:u,width:v,height:g,direction:0,val:0}),t&&(a=1-a);return r}algorithmLowAspectRatio(t,e,i){let r=[],s={x:e.x,y:e.y,parent:e},a=e.direction,o=i.length-1,l=new _t(e.height,e.width,a,s),d,h=0;for(let p of i)d=e.width*e.height*(p.val/e.val),l.addElement(d),l.lP.nR>l.lP.lR&&this.algorithmCalcPoints(t,!1,l,r,s),h===o&&this.algorithmCalcPoints(t,!0,l,r,s),++h;return r}alignDataLabel(t,e,i){ie.prototype.alignDataLabel.apply(this,arguments),t.dataLabel&&t.dataLabel.attr({zIndex:(t.node.zIndex||0)+1})}applyTreeGrouping(){let t=this,e=t.parentList||{},{cluster:i}=t.options,r=i?.minimumClusterSize||5;if(i?.enabled){let s={},a=l=>{if(l?.point?.shapeArgs){let{width:d=0,height:h=0}=l.point.shapeArgs,{pixelWidth:p=0,pixelHeight:u=0}=i,v=M(u),g=u?p*u:p*p;(d<p||h<(v?u:p)||d*h<g)&&!l.isGroup&&M(l.parent)&&(s[l.parent]||(s[l.parent]=[]),s[l.parent].push(l))}l?.children.forEach(d=>{a(d)})};for(let l in a(t.tree),s)s[l]&&s[l].length>r&&s[l].forEach(d=>{let h=e[l].indexOf(d.i);if(h!==-1){e[l].splice(h,1);let p=`highcharts-grouped-treemap-points-${d.parent||"root"}`,u=t.points.find(m=>m.id===p);if(!u){let m=t.pointClass,f=t.points.length;D(u=new m(t,{className:i.className,color:i.color,id:p,index:f,isGroup:!0,value:0}),{formatPrefix:"cluster"}),t.points.push(u),e[l].push(f),e[p]=[]}let v=u.groupedPointsAmount+1,g=t.points[u.index].options.value||0,c=i.name||`+ ${v}`;t.points[u.index].groupedPointsAmount=v,t.points[u.index].options.value=g+(d.point.value||0),t.points[u.index].name=c,e[p].push(d.point.index)}});t.nodeMap={},t.nodeList=[],t.parentList=e;let o=t.buildTree("",-1,0,t.parentList);t.translate(o)}}calculateChildrenAreas(t,e){let i=this.options,r=this.mapOptionsToLevel[t.level+1],s=O(r?.layoutAlgorithm&&this[r?.layoutAlgorithm]&&r.layoutAlgorithm,i.layoutAlgorithm),a=i.alternateStartingDirection,o=t.children.filter(c=>t.isGroup||!c.ignore),l=r?.groupPadding??i.groupPadding??0,d=this.nodeMap[this.rootNode];if(!s)return;let h=[],p=d.pointValues?.width||0,u=d.pointValues?.height||0;r?.layoutStartingDirection&&(e.direction=+(r.layoutStartingDirection!=="vertical")),h=this[s](e,o);let v=-1;for(let c of o){let m=h[++v];c===d&&(p=p||m.width,u=m.height);let f=l/(this.xAxis.len/u),w=l/(this.yAxis.len/u);if(c.values=C(m,{val:c.childrenTotal,direction:a?1-e.direction:e.direction}),c.children.length&&c.point.dataLabels?.length){let A=le(c.point.dataLabels.map(L=>L.options?.headers&&L.height||0))/(this.yAxis.len/u);A<c.values.height/2&&(c.values.y+=A,c.values.height-=A)}if(l){let A=Math.min(f,c.values.width/4),L=Math.min(w,c.values.height/4);c.values.x+=A,c.values.width-=2*A,c.values.y+=L,c.values.height-=2*L}c.pointValues=C(m,{x:m.x/this.axisRatio,y:100-m.y-m.height,width:m.width/this.axisRatio}),c.children.length&&this.calculateChildrenAreas(c,c.values)}let g=(c,m=[],f=!0)=>(c.children.forEach(w=>{f&&w.isLeaf?m.push(w.point):f||w.isLeaf||m.push(w.point),w.children.length&&g(w,m,f)}),m);if(i.nodeSizeBy==="leaf"&&t===d&&this.hasOutsideDataLabels&&!g(d,void 0,!1).some(c=>J(c.options.value))&&!J(d.point?.options.value)){let c=g(d),m=c.map(x=>x.options.value||0),f=c.map(({node:{pointValues:x}})=>x?x.width*x.height:0),w=m.reduce((x,T)=>x+T,0),A=f.reduce((x,T)=>x+T,0)/w,L=0,G=0;c.forEach((x,T)=>{let gt=ae((m[T]?f[T]/m[T]:1)/A,.8,1.4),W=1-gt;x.value&&(f[T]<20&&(W*=f[T]/20),W>G&&(G=W),W<L&&(L=W),x.simulatedValue=(x.simulatedValue||x.value)/gt)}),(L<-.05||G>.05)&&this.simulation<10?(this.simulation++,this.setTreeValues(t),e.val=t.val,this.calculateChildrenAreas(t,e)):(c.forEach(x=>{delete x.simulatedValue}),this.setTreeValues(t),this.simulation=0)}}createList(t){let e=this.chart,i=e.breadcrumbs,r=[];if(i){let s=0;r.push({level:s,levelOptions:e.series[0]});let a=t.target.nodeMap[t.newRootId],o=[];for(;a.parent||a.parent==="";)o.push(a),a=t.target.nodeMap[a.parent];for(let l of o.reverse())r.push({level:++s,levelOptions:l});r.length<=1&&(r.length=0)}return r}drawDataLabels(){let t=this.mapOptionsToLevel,e=this.points.filter(function(s){return s.node.visible||M(s.dataLabel)}),i=j(this.options.dataLabels||{})[0]?.padding,r=e.some(s=>J(s.plotY));for(let s of e){let a={},o={style:a},l=t[s.node.level];if((!s.node.isLeaf&&!s.node.isGroup||s.node.isGroup&&s.node.level<=this.nodeMap[this.rootNode].level)&&(o.enabled=!1),l?.dataLabels&&(C(!0,o,j(l.dataLabels)[0]),this.hasDataLabels=()=>!0),s.node.isLeaf?o.inside=!0:o.headers&&(o.verticalAlign="top"),s.shapeArgs&&r){let{height:d=0,width:h=0}=s.shapeArgs;if(h>32&&d>16&&s.shouldDraw()){let p=h-2*(o.padding||i||0);a.width=`${p}px`,a.lineClamp??(a.lineClamp=Math.floor(d/16)),a.visibility="inherit",o.headers&&s.dataLabel?.attr({width:p})}else a.width=`${h}px`,a.visibility="hidden"}s.dlOptions=C(o,s.options.dataLabels)}super.drawDataLabels(e)}drawPoints(t=this.points){let e=this.chart,i=e.renderer,r=e.styledMode,s=this.options,a=r?{}:s.shadow,o=s.borderRadius,l=e.pointCount<s.animationLimit,d=s.allowTraversingTree;for(let h of t){let p={},u={},v={},g="level-group-"+h.node.level,c=!!h.graphic,m=l&&c,f=h.shapeArgs;h.shouldDraw()&&(h.isInside=!0,o&&(u.r=o),C(!0,m?p:u,c?f:{},r?{}:this.pointAttribs(h,h.selected?"select":void 0)),this.colorAttribs&&r&&D(v,this.colorAttribs(h)),this[g]||(this[g]=i.g(g).attr({zIndex:-(h.node.level||0)}).add(this.group),this[g].survive=!0)),h.draw({animatableAttribs:p,attribs:u,css:v,group:this[g],imageUrl:h.imageUrl,renderer:i,shadow:a,shapeArgs:f,shapeType:h.shapeType}),d&&h.graphic&&(h.drillId=s.interactByLeaf?this.drillToByLeaf(h):this.drillToByGroup(h))}}drillToByGroup(t){return(!t.node.isLeaf||!!t.node.isGroup)&&t.id}drillToByLeaf(t){let{traverseToLeaf:e}=t.series.options,i=!1,r;if(t.node.parent!==this.rootNode&&t.node.isLeaf)if(e)i=t.id;else for(r=t.node;!i;)r.parent!==void 0&&(r=this.nodeMap[r.parent]),r.parent===this.rootNode&&(i=r.id);return i}drillToNode(t,e){he(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(t,e)}drillUp(){let t=this.nodeMap[this.rootNode];t&&ct(t.parent)&&this.setRootNode(t.parent,!0,{trigger:"traverseUpButton"})}getExtremes(){let{dataMin:t,dataMax:e}=super.getExtremes(this.colorValueData);return this.valueMin=t,this.valueMax=e,super.getExtremes()}getListOfParents(t,e){let i=ut(t)?t:[],r=ut(e)?e:[],s=i.reduce(function(a,o,l){let d=O(o.parent,"");return a[d]===void 0&&(a[d]=[]),a[d].push(l),a},{"":[]});for(let a of Object.keys(s)){let o=s[a];if(a!==""&&r.indexOf(a)===-1){for(let l of o)s[""].push(l);delete s[a]}}return s}getTree(){let t=this.data.map(function(e){return e.id});return this.parentList=this.getListOfParents(this.data,t),this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,this.parentList||{})}buildTree(t,e,i,r,s){let a=[],o=this.points[e],l=0,d;for(let p of r[t]||[])l=Math.max((d=this.buildTree(this.points[p].id,p,i+1,r,t)).height+1,l),a.push(d);let h=new this.NodeClass().init(t,e,a,l,i,this,s);for(let p of a)p.parentNode=h;return this.nodeMap[h.id]=h,this.nodeList.push(h),o&&(o.node=h,h.point=o),h}hasData(){return!!this.dataTable.rowCount}init(t,e){let i=this,r=C(e.drillUpButton,e.breadcrumbs),s=N(i,"setOptions",a=>{let o=a.userOptions;M(o.allowDrillToNode)&&!M(o.allowTraversingTree)&&(o.allowTraversingTree=o.allowDrillToNode,delete o.allowDrillToNode),M(o.drillUpButton)&&!M(o.traverseUpButton)&&(o.traverseUpButton=o.drillUpButton,delete o.drillUpButton);let l=j(o.dataLabels||{});o.levels?.forEach(d=>{l.push.apply(l,j(d.dataLabels||{}))}),this.hasOutsideDataLabels=l.some(d=>d.headers)});super.init(t,e),delete i.opacity,i.eventsToUnbind.push(s),i.options.allowTraversingTree&&(i.eventsToUnbind.push(N(i,"click",i.onClickDrillToNode)),i.eventsToUnbind.push(N(i,"setRootNode",function(a){let o=i.chart;o.breadcrumbs&&o.breadcrumbs.updateProperties(i.createList(a))})),i.eventsToUnbind.push(N(i,"update",function(a,o){let l=this.chart.breadcrumbs;l&&a.options.breadcrumbs&&l.update(a.options.breadcrumbs),this.hadOutsideDataLabels=this.hasOutsideDataLabels})),i.eventsToUnbind.push(N(i,"destroy",function(a){let o=this.chart;o.breadcrumbs&&!a.keepEventsForUpdate&&(o.breadcrumbs.destroy(),o.breadcrumbs=void 0)}))),t.breadcrumbs||(t.breadcrumbs=new V(t,r)),i.eventsToUnbind.push(N(t.breadcrumbs,"up",function(a){let o=this.level-a.newLevel;for(let l=0;l<o;l++)i.drillUp()}))}onClickDrillToNode(t){let e=t.point,i=e?.drillId;ct(i)&&(e.setState(""),this.setRootNode(i,!0,{trigger:"click"}))}pointAttribs(t,e){let i=pe(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},r=t&&i[t.node.level]||{},s=this.options,a=e&&s.states&&s.states[e]||{},o=t?.getClassName()||"",l={stroke:t&&t.borderColor||r.borderColor||a.borderColor||s.borderColor,"stroke-width":O(t&&t.borderWidth,r.borderWidth,a.borderWidth,s.borderWidth),dashstyle:t?.borderDashStyle||r.borderDashStyle||a.borderDashStyle||s.borderDashStyle,fill:t?.color||this.color};return o.indexOf("highcharts-above-level")!==-1?(l.fill="none",l["stroke-width"]=0):o.indexOf("highcharts-internal-node-interactive")!==-1?(l["fill-opacity"]=a.opacity??s.opacity??1,l.cursor="pointer"):o.indexOf("highcharts-internal-node")!==-1?l.fill="none":e&&a.brightness&&(l.fill=te(l.fill).brighten(a.brightness).get()),l}setColorRecursive(t,e,i,r,s){let a=this?.chart,o=a?.options?.colors;if(t){let l=se(t,{colors:o,index:r,mapOptionsToLevel:this.mapOptionsToLevel,parentColor:e,parentColorIndex:i,series:this,siblings:s}),d=this.points[t.i];d&&(d.color=l.color,d.colorIndex=l.colorIndex);let h=-1;for(let p of t.children||[])this.setColorRecursive(p,l.color,l.colorIndex,++h,t.children.length)}}setPointValues(){let t=this,{points:e,xAxis:i,yAxis:r}=t,s=t.chart.styledMode,a=o=>s?0:t.pointAttribs(o)["stroke-width"]||0;for(let o of e){let{pointValues:l,visible:d}=o.node;if(l&&d){let{height:h,width:p,x:u,y:v}=l,g=a(o),c=i.toPixels(u,!0),m=i.toPixels(u+p,!0),f=r.toPixels(v,!0),w=r.toPixels(v+h,!0),A=c===0?g/2:_(i.toPixels(u,!0),g,!0),L=m===i.len?i.len-g/2:_(i.toPixels(u+p,!0),g,!0),G=f===r.len?r.len-g/2:_(r.toPixels(v,!0),g,!0),x=w===0?g/2:_(r.toPixels(v+h,!0),g,!0),T={x:Math.min(A,L),y:Math.min(G,x),width:Math.abs(L-A),height:Math.abs(x-G)};o.plotX=T.x+T.width/2,o.plotY=T.y+T.height/2,o.shapeArgs=T}else delete o.plotX,delete o.plotY}}setRootNode(t,e,i){de(this,"setRootNode",D({newRootId:t,previousRootId:this.rootNode,redraw:O(e,!0),series:this},i),function(r){let s=r.series;s.idPreviousRoot=r.previousRootId,s.rootNode=r.newRootId,s.isDirty=!0,r.redraw&&s.chart.redraw()})}setState(t){this.options.inactiveOtherPoints=!0,super.setState(t,!1),this.options.inactiveOtherPoints=!1}setTreeValues(t){let e=this.options,i=this.rootNode,r=this.nodeMap[i],s=typeof e.levelIsConstant!="boolean"||e.levelIsConstant,a=[],o=this.points[t.i],l=0;for(let h of t.children)h=this.setTreeValues(h),a.push(h),h.ignore||(l+=h.val);ce(a,(h,p)=>(h.sortIndex||0)-(p.sortIndex||0));let d=O(o?.simulatedValue,o?.options.value,l);return o&&(o.value=d),o?.isGroup&&e.cluster?.reductionFactor&&(d/=e.cluster.reductionFactor),t.parentNode?.point?.isGroup&&this.rootNode!==t.parent&&(t.visible=!1),D(t,{children:a,childrenTotal:l,ignore:!(O(o?.visible,!0)&&d>0),isLeaf:t.visible&&!l,isGroup:o?.isGroup,levelDynamic:t.level-(s?0:r.level),name:O(o?.name,""),sortIndex:O(o?.sortIndex,-d),val:d}),t}sliceAndDice(t,e){return this.algorithmFill(!0,t,e)}squarified(t,e){return this.algorithmLowAspectRatio(!0,t,e)}strip(t,e){return this.algorithmLowAspectRatio(!1,t,e)}stripes(t,e){return this.algorithmFill(!1,t,e)}translate(t){let e=this,i=e.options,r=!t,s=re(e),a,o,l,d;t||s.startsWith("highcharts-grouped-treemap-points-")||((this.points||[]).forEach(h=>{h.isGroup&&h.destroy()}),super.translate(),t=e.getTree()),e.tree=t=t||e.tree,a=e.nodeMap[s],s===""||a||(e.setRootNode("",!1),s=e.rootNode,a=e.nodeMap[s]),a.point?.isGroup||(e.mapOptionsToLevel=oe({from:a.level+1,levels:i.levels,to:t.height,defaults:{levelIsConstant:e.options.levelIsConstant,colorByPoint:i.colorByPoint}})),q.recursive(e.nodeMap[e.rootNode],h=>{let p=h.parent,u=!1;return h.visible=!0,(p||p==="")&&(u=e.nodeMap[p]),u}),q.recursive(e.nodeMap[e.rootNode].children,h=>{let p=!1;for(let u of h)u.visible=!0,u.children.length&&(p=(p||[]).concat(u.children));return p}),e.setTreeValues(t),e.axisRatio=e.xAxis.len/e.yAxis.len,e.nodeMap[""].pointValues=o={x:0,y:0,width:100,height:100},e.nodeMap[""].values=l=C(o,{width:o.width*e.axisRatio,direction:+(i.layoutStartingDirection!=="vertical"),val:t.val}),(this.hasOutsideDataLabels||this.hadOutsideDataLabels)&&this.drawDataLabels(),e.calculateChildrenAreas(t,l),e.colorAxis||i.colorByPoint||e.setColorRecursive(e.tree),i.allowTraversingTree&&a.pointValues&&(d=a.pointValues,e.xAxis.setExtremes(d.x,d.x+d.width,!1),e.yAxis.setExtremes(d.y,d.y+d.height,!1),e.xAxis.setScale(),e.yAxis.setScale()),e.setPointValues(),r&&e.applyTreeGrouping()}}U.defaultOptions=C(pt.defaultOptions,Zt),D(U.prototype,{buildKDTree:dt,colorAttribs:lt.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:dt,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value","colorValue"],pointClass:nt,NodeClass:class{constructor(){this.childrenTotal=0,this.visible=!1}init(n,t,e,i,r,s,a){return this.id=n,this.i=t,this.children=e,this.height=i,this.level=r,this.series=s,this.parent=a,this}},trackerGroups:["group","dataLabelsGroup"],utils:q}),lt.compose(U),k().registerSeriesType("treemap",U);let H=B();H.Breadcrumbs=H.Breadcrumbs||V,H.Breadcrumbs.compose(H.Chart,H.defaultOptions),U.compose(H.Series);let ve=B();return it.default})())});export default be();
