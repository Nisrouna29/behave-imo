import{b as k,d as O,g as I,m as N,n as B,o as j,r as A}from"./chunk-EWNNNQT2.js";import{a as F}from"./chunk-VCLEFEUG.js";import{c as T,e as L,h as w}from"./chunk-3FAXZB7V.js";import{Ba as b,Db as P,Ma as S,Na as E,Oa as u,Va as t,Wa as n,Xa as s,Za as d,bb as r,cb as x,db as C,eb as M,fa as v,fb as c,gb as g,hb as f,sa as p,wa as D}from"./chunk-U2T7IFCI.js";import{a as _,b as y}from"./chunk-AIZVJUQQ.js";var z=class h{constructor(a,l){this.route=a;this.router=l}activeRoute="/dossier-location";propertyId=0;dossierData=v({propertyId:0,propertyTitle:"",propertyAddress:"",propertyPrice:"",propertyType:"",progress:25,identity:{idNumber:"",idDocument:[],addressDocument:[]},financial:{monthlySalary:"",contractType:"CDI",salaryDocuments:[],bankDocuments:[]},professional:{employerName:"",position:"",employerDocument:[]}});uploadedFiles=v([]);isDragOver=v(!1);ngOnInit(){this.route.params.subscribe(a=>{this.propertyId=+a.id,this.loadPropertyData()})}loadPropertyData(){let a=y(_({},this.dossierData()),{propertyId:this.propertyId,propertyTitle:"Villa contemporaine",propertyAddress:"15 Avenue des Tilleuls, Neuilly-sur-Seine",propertyPrice:"1 250\u20AC/mois",propertyType:"Location"});this.dossierData.set(a)}onFileUpload(a,l,e){let o=a.target;if(o.files&&o.files.length>0){let i=Array.from(o.files);this.handleFileUpload(i,l,e)}}onDragOver(a){a.preventDefault(),this.isDragOver.set(!0)}onDragLeave(a){a.preventDefault(),this.isDragOver.set(!1)}onDrop(a,l,e){if(a.preventDefault(),this.isDragOver.set(!1),a.dataTransfer&&a.dataTransfer.files){let o=Array.from(a.dataTransfer.files);this.handleFileUpload(o,l,e)}}handleFileUpload(a,l,e){let o=a.map(m=>({id:Math.random().toString(36).substr(2,9),name:m.name,size:m.size,type:m.type,file:m,uploadedAt:new Date}));this.uploadedFiles.update(m=>[...m,...o]);let i=this.dossierData();l==="identity"?e==="id"?i.identity.idDocument=a:e==="address"&&(i.identity.addressDocument=a):l==="financial"?e==="salary"?i.financial.salaryDocuments=a:e==="bank"&&(i.financial.bankDocuments=a):l==="professional"&&(i.professional.employerDocument=a),this.dossierData.set(_({},i)),this.updateProgress()}updateProgress(){let a=this.dossierData(),l=0,e=0;e+=2,a.identity.idNumber&&l++,a.identity.idDocument.length>0&&l++,a.identity.addressDocument.length>0&&l++,e+=2,a.financial.monthlySalary&&l++,a.financial.salaryDocuments.length>0&&l++,e+=2,a.professional.employerName&&l++,a.professional.position&&l++;let o=Math.round(l/e*100);this.dossierData.update(i=>y(_({},i),{progress:o}))}triggerFileInput(a){let l=document.getElementById(a);l&&l.click()}removeFile(a){this.uploadedFiles.update(l=>l.filter(e=>e.id!==a)),this.updateProgress()}onSaveDraft(){console.log("Saving draft...",this.dossierData())}onSubmitDossier(){console.log("Submitting dossier...",this.dossierData())}onBackToProperties(){this.router.navigate(["/proprietes"])}formatFileSize(a){if(a===0)return"0 Bytes";let l=1024,e=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(a)/Math.log(l));return parseFloat((a/Math.pow(l,o)).toFixed(2))+" "+e[o]}static \u0275fac=function(l){return new(l||h)(D(T),D(L))};static \u0275cmp=b({type:h,selectors:[["app-dossier-location"]],decls:191,vars:23,consts:[[3,"activeRoute"],["id","document-submission",1,"max-w-5xl","mx-auto","px-4","sm:px-6","py-8"],["id","breadcrumb",1,"mb-8"],[1,"flex","items-center","space-x-2","text-gray-600"],[1,"hover:text-orange-600","cursor-pointer",3,"click"],[1,"fa-solid","fa-chevron-right","text-xs"],[1,"text-orange-600"],["id","page-header",1,"mb-8"],[1,"bg-white","rounded-2xl","border","border-gray-200","shadow-lg","p-6","sm:p-8"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","gap-4"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","mt-4","space-x-4"],[1,"bg-orange-100","text-orange-700","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"text-gray-500","text-sm"],[1,"text-right"],[1,"text-sm","text-gray-500","mb-1"],[1,"flex","items-center","space-x-2"],[1,"w-32","bg-gray-200","rounded-full","h-2"],[1,"bg-orange-500","h-2","rounded-full","transition-all","duration-300"],[1,"text-sm","font-medium","text-gray-700"],["id","documents-section",1,"grid","grid-cols-1","gap-6"],["id","identity-docs",1,"bg-white","rounded-2xl","border","border-gray-200","shadow-lg","p-6","sm:p-8"],[1,"flex","items-center","mb-6"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center","mr-4"],[1,"fa-solid","fa-id-card","text-orange-600","text-xl"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-800"],[1,"space-y-6"],[1,"border","border-gray-200","rounded-xl","p-4","sm:p-6"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","mb-4","gap-2"],[1,"flex","items-center","space-x-3"],[1,"fa-solid","fa-passport","text-gray-400"],[1,"font-semibold","text-gray-800"],[1,"bg-red-100","text-red-700","px-2","py-1","rounded","text-xs","font-medium"],[1,"text-sm","text-gray-500"],[1,"upload-zone","rounded-lg","p-6","sm:p-8","text-center","cursor-pointer",3,"dragover","dragleave","drop","click"],["type","file","id","identity-upload","accept",".pdf,.jpg,.jpeg,.png","multiple","",1,"hidden",3,"change"],[1,"fa-solid","fa-cloud-upload","text-orange-400","text-2xl","sm:text-3xl","mb-3"],[1,"text-gray-600","mb-2"],[1,"mt-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Ex: 123456789",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","ngModel"],[1,"fa-solid","fa-file-contract","text-gray-400"],["type","file","id","address-upload","accept",".pdf,.jpg,.jpeg,.png",1,"hidden",3,"change"],["id","financial-docs",1,"bg-white","rounded-2xl","border","border-gray-200","shadow-lg","p-6","sm:p-8"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center","mr-4"],[1,"fa-solid","fa-euro-sign","text-green-600","text-xl"],[1,"fa-solid","fa-file-invoice","text-gray-400"],["type","file","id","salary-upload","accept",".pdf,.jpg,.jpeg,.png","multiple","",1,"hidden",3,"change"],[1,"mt-4","grid","grid-cols-1","sm:grid-cols-2","gap-4"],["type","text","placeholder","Ex: 3500\u20AC",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","ngModel"],[1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","ngModel"],["value","CDI"],["value","CDD"],["value","Freelance"],["value","Fonctionnaire"],[1,"fa-solid","fa-building-columns","text-gray-400"],[1,"bg-orange-100","text-orange-700","px-2","py-1","rounded","text-xs","font-medium"],["type","file","id","bank-upload","accept",".pdf,.jpg,.jpeg,.png","multiple","",1,"hidden",3,"change"],["id","professional-docs",1,"bg-white","rounded-2xl","border","border-gray-200","shadow-lg","p-6","sm:p-8"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","mr-4"],[1,"fa-solid","fa-briefcase","text-blue-600","text-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],["type","text","placeholder","Ex: Soci\xE9t\xE9 ABC",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","ngModel"],["type","text","placeholder","Ex: D\xE9veloppeur Senior",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","ngModel"],[1,"fa-solid","fa-certificate","text-gray-400"],["type","file","id","employer-upload","accept",".pdf,.jpg,.jpeg,.png",1,"hidden",3,"change"],["id","submission-actions",1,"mt-8","bg-white","rounded-2xl","border","border-gray-200","shadow-lg","p-6","sm:p-8"],[1,"text-lg","sm:text-xl","font-bold","text-gray-800","mb-2"],[1,"flex","flex-col","sm:flex-row","space-y-2","sm:space-y-0","sm:space-x-4"],[1,"border-2","border-gray-300","text-gray-700","px-6","py-3","rounded-xl","hover:bg-gray-50","transition-all","duration-300","font-medium",3,"click"],[1,"fa-solid","fa-save","mr-2"],[1,"gradient-bg","text-white","px-6","sm:px-8","py-3","rounded-xl","hover:shadow-lg","transition-all","duration-300","font-semibold",3,"click"],[1,"fa-solid","fa-paper-plane","mr-2"]],template:function(l,e){l&1&&(s(0,"app-shared-header",0),t(1,"div",1)(2,"div",2)(3,"nav",3)(4,"span",4),d("click",function(){return e.onBackToProperties()}),r(5,"Accueil"),n(),s(6,"i",5),t(7,"span",4),d("click",function(){return e.onBackToProperties()}),r(8,"Propri\xE9t\xE9s"),n(),s(9,"i",5),t(10,"span",6),r(11,"Soumission de documents"),n()()(),t(12,"div",7)(13,"div",8)(14,"div",9)(15,"div")(16,"h1",10),r(17,"Dossier de candidature"),n(),t(18,"p",11),r(19),n(),t(20,"div",12)(21,"span",13),r(22),n(),t(23,"span",14),r(24),n()()(),t(25,"div",15)(26,"div",16),r(27,"Progression"),n(),t(28,"div",17)(29,"div",18),s(30,"div",19),n(),t(31,"span",20),r(32),n()()()()()(),t(33,"div",21)(34,"div",22)(35,"div",23)(36,"div",24),s(37,"i",25),n(),t(38,"div")(39,"h2",26),r(40,"Pi\xE8ces d'identit\xE9"),n(),t(41,"p",11),r(42,"Documents requis pour votre identification"),n()()(),t(43,"div",27)(44,"div",28)(45,"div",29)(46,"div",30),s(47,"i",31),t(48,"span",32),r(49,"Carte d'identit\xE9 ou Passeport"),n(),t(50,"span",33),r(51,"Obligatoire"),n()(),t(52,"div",34),r(53,"Recto/Verso"),n()(),t(54,"div",35),d("dragover",function(i){return e.onDragOver(i)})("dragleave",function(i){return e.onDragLeave(i)})("drop",function(i){return e.onDrop(i,"identity","id")})("click",function(){return e.triggerFileInput("identity-upload")}),t(55,"input",36),d("change",function(i){return e.onFileUpload(i,"identity","id")}),n(),s(56,"i",37),t(57,"p",38),r(58,"Glissez vos fichiers ici ou cliquez pour parcourir"),n(),t(59,"p",34),r(60,"PDF, JPG, PNG (max 5MB par fichier)"),n()(),t(61,"div",39)(62,"label",40),r(63,"Num\xE9ro de pi\xE8ce d'identit\xE9"),n(),t(64,"input",41),f("ngModelChange",function(i){return g(e.dossierData().identity.idNumber,i)||(e.dossierData().identity.idNumber=i),i}),d("input",function(){return e.updateProgress()}),n()()(),t(65,"div",28)(66,"div",29)(67,"div",30),s(68,"i",42),t(69,"span",32),r(70,"Justificatif de domicile"),n(),t(71,"span",33),r(72,"Obligatoire"),n()(),t(73,"div",34),r(74,"Moins de 3 mois"),n()(),t(75,"div",35),d("dragover",function(i){return e.onDragOver(i)})("dragleave",function(i){return e.onDragLeave(i)})("drop",function(i){return e.onDrop(i,"identity","address")})("click",function(){return e.triggerFileInput("address-upload")}),t(76,"input",43),d("change",function(i){return e.onFileUpload(i,"identity","address")}),n(),s(77,"i",37),t(78,"p",38),r(79,"Facture \xE9lectricit\xE9, gaz, t\xE9l\xE9phone ou internet"),n(),t(80,"p",34),r(81,"PDF, JPG, PNG (max 5MB)"),n()()()()(),t(82,"div",44)(83,"div",23)(84,"div",45),s(85,"i",46),n(),t(86,"div")(87,"h2",26),r(88,"Justificatifs financiers"),n(),t(89,"p",11),r(90,"Preuves de vos revenus et situation financi\xE8re"),n()()(),t(91,"div",27)(92,"div",28)(93,"div",29)(94,"div",30),s(95,"i",47),t(96,"span",32),r(97,"Bulletins de salaire"),n(),t(98,"span",33),r(99,"Obligatoire"),n()(),t(100,"div",34),r(101,"3 derniers mois"),n()(),t(102,"div",35),d("dragover",function(i){return e.onDragOver(i)})("dragleave",function(i){return e.onDragLeave(i)})("drop",function(i){return e.onDrop(i,"financial","salary")})("click",function(){return e.triggerFileInput("salary-upload")}),t(103,"input",48),d("change",function(i){return e.onFileUpload(i,"financial","salary")}),n(),s(104,"i",37),t(105,"p",38),r(106,"T\xE9l\xE9chargez vos 3 derniers bulletins de salaire"),n(),t(107,"p",34),r(108,"PDF recommand\xE9 (max 5MB par fichier)"),n()(),t(109,"div",49)(110,"div")(111,"label",40),r(112,"Salaire net mensuel"),n(),t(113,"input",50),f("ngModelChange",function(i){return g(e.dossierData().financial.monthlySalary,i)||(e.dossierData().financial.monthlySalary=i),i}),d("input",function(){return e.updateProgress()}),n()(),t(114,"div")(115,"label",40),r(116,"Type de contrat"),n(),t(117,"select",51),f("ngModelChange",function(i){return g(e.dossierData().financial.contractType,i)||(e.dossierData().financial.contractType=i),i}),t(118,"option",52),r(119,"CDI"),n(),t(120,"option",53),r(121,"CDD"),n(),t(122,"option",54),r(123,"Freelance"),n(),t(124,"option",55),r(125,"Fonctionnaire"),n()()()()(),t(126,"div",28)(127,"div",29)(128,"div",30),s(129,"i",56),t(130,"span",32),r(131,"Relev\xE9s bancaires"),n(),t(132,"span",57),r(133,"Recommand\xE9"),n()(),t(134,"div",34),r(135,"3 derniers mois"),n()(),t(136,"div",35),d("dragover",function(i){return e.onDragOver(i)})("dragleave",function(i){return e.onDragLeave(i)})("drop",function(i){return e.onDrop(i,"financial","bank")})("click",function(){return e.triggerFileInput("bank-upload")}),t(137,"input",58),d("change",function(i){return e.onFileUpload(i,"financial","bank")}),n(),s(138,"i",37),t(139,"p",38),r(140,"Relev\xE9s de compte bancaire"),n(),t(141,"p",34),r(142,"PDF, JPG, PNG (max 5MB par fichier)"),n()()()()(),t(143,"div",59)(144,"div",23)(145,"div",60),s(146,"i",61),n(),t(147,"div")(148,"h2",26),r(149,"Informations professionnelles"),n(),t(150,"p",11),r(151,"D\xE9tails sur votre situation professionnelle"),n()()(),t(152,"div",27)(153,"div",62)(154,"div")(155,"label",40),r(156,"Nom de l'employeur"),n(),t(157,"input",63),f("ngModelChange",function(i){return g(e.dossierData().professional.employerName,i)||(e.dossierData().professional.employerName=i),i}),d("input",function(){return e.updateProgress()}),n()(),t(158,"div")(159,"label",40),r(160,"Poste occup\xE9"),n(),t(161,"input",64),f("ngModelChange",function(i){return g(e.dossierData().professional.position,i)||(e.dossierData().professional.position=i),i}),d("input",function(){return e.updateProgress()}),n()()(),t(162,"div",28)(163,"div",29)(164,"div",30),s(165,"i",65),t(166,"span",32),r(167,"Attestation employeur"),n(),t(168,"span",57),r(169,"Recommand\xE9"),n()()(),t(170,"div",35),d("dragover",function(i){return e.onDragOver(i)})("dragleave",function(i){return e.onDragLeave(i)})("drop",function(i){return e.onDrop(i,"professional","employer")})("click",function(){return e.triggerFileInput("employer-upload")}),t(171,"input",66),d("change",function(i){return e.onFileUpload(i,"professional","employer")}),n(),s(172,"i",37),t(173,"p",38),r(174,"Attestation de travail ou contrat"),n(),t(175,"p",34),r(176,"PDF, JPG, PNG (max 5MB)"),n()()()()()(),t(177,"div",67)(178,"div",9)(179,"div")(180,"h3",68),r(181,"Finaliser votre dossier"),n(),t(182,"p",11),r(183,"V\xE9rifiez que tous les documents requis sont t\xE9l\xE9charg\xE9s"),n()(),t(184,"div",69)(185,"button",70),d("click",function(){return e.onSaveDraft()}),s(186,"i",71),r(187," Sauvegarder le brouillon "),n(),t(188,"button",72),d("click",function(){return e.onSubmitDossier()}),s(189,"i",73),r(190," Soumettre le dossier "),n()()()()()),l&2&&(S("activeRoute",e.activeRoute),p(19),M("",e.dossierData().propertyTitle," - ",e.dossierData().propertyAddress,""),p(3),x(e.dossierData().propertyType),p(2),x(e.dossierData().propertyPrice),p(6),E("width",e.dossierData().progress,"%"),p(2),C("",e.dossierData().progress,"%"),p(22),u("dragover",e.isDragOver()),p(10),c("ngModel",e.dossierData().identity.idNumber),p(11),u("dragover",e.isDragOver()),p(27),u("dragover",e.isDragOver()),p(11),c("ngModel",e.dossierData().financial.monthlySalary),p(4),c("ngModel",e.dossierData().financial.contractType),p(19),u("dragover",e.isDragOver()),p(21),c("ngModel",e.dossierData().professional.employerName),p(4),c("ngModel",e.dossierData().professional.position),p(9),u("dragover",e.isDragOver()))},dependencies:[P,w,A,B,j,k,N,O,I,F],styles:[".upload-zone[_ngcontent-%COMP%]{border:2px dashed #fed7aa;transition:all .3s ease}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#f97316;background-color:#fff7ed}.upload-zone.dragover[_ngcontent-%COMP%]{border-color:#f97316;background-color:#fff7ed;transform:scale(1.02)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.uploaded-file[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.progress-bar[_ngcontent-%COMP%]{transition:width .5s ease-in-out}@media (max-width: 640px){.upload-zone[_ngcontent-%COMP%]{padding:1.5rem!important}.upload-zone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem!important}}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #f973161a}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})};export{z as DossierLocationComponent};
